<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MBTI ê¶í•© ë¶„ì„ ì•±</title>
  <style>
    body { font-family: 'Jua', Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; text-align: center; }
    select, button { padding: 12px; font-size: 1.1rem; margin: 10px; border-radius: 8px; border: 2px solid #7e57c2; }
    .result { background: #f3e5f5; border-radius: 12px; padding: 20px; margin-top: 30px; text-align: left; }
    h3 { color: #5e35b1; }
    ul { margin-bottom: 0; }
    .bar-container { background: #ede7f6; border-radius: 8px; margin: 24px 0 16px 0; height: 32px; width: 100%; max-width: 350px; display: flex; align-items: center; }
    .bar { background: #7e57c2; height: 100%; border-radius: 8px 0 0 8px; transition: width 0.7s; }
    .score-label { position: absolute; font-size: 1.2rem; color: #5e35b1; font-weight: bold; margin-left: 10px; }
    .bar-wrap { position: relative; display: inline-block; width: 100%; }
  </style>
</head>
<body>
  <h1>ğŸ”® MBTI ê¶í•© ë¶„ì„ ì•±</h1>
  <p>ë‚˜ì™€ ìƒëŒ€ë°©ì˜ MBTIë¥¼ ì„ íƒí•˜ë©´<br>ì„±í–¥ ìœ ì‚¬ë„ì™€ ì£¼ìš” ì°¨ì´ì ì„ ë¶„ì„í•´ë“œë ¤ìš”!</p>
  
  <div>
    <select id="myMbti">
      <option value="">ë‚˜ì˜ MBTI</option>
      <option value="ISTJ">ISTJ</option>
      <option value="ISFJ">ISFJ</option>
      <option value="INFJ">INFJ</option>
      <option value="INTJ">INTJ</option>
      <option value="ISTP">ISTP</option>
      <option value="ISFP">ISFP</option>
      <option value="INFP">INFP</option>
      <option value="INTP">INTP</option>
      <option value="ESTP">ESTP</option>
      <option value="ESFP">ESFP</option>
      <option value="ENFP">ENFP</option>
      <option value="ENTP">ENTP</option>
      <option value="ESTJ">ESTJ</option>
      <option value="ESFJ">ESFJ</option>
      <option value="ENFJ">ENFJ</option>
      <option value="ENTJ">ENTJ</option>
    </select>

    <select id="otherMbti">
      <option value="">ìƒëŒ€ë°© MBTI</option>
      <option value="ISTJ">ISTJ</option>
      <option value="ISFJ">ISFJ</option>
      <option value="INFJ">INFJ</option>
      <option value="INTJ">INTJ</option>
      <option value="ISTP">ISTP</option>
      <option value="ISFP">ISFP</option>
      <option value="INFP">INFP</option>
      <option value="INTP">INTP</option>
      <option value="ESTP">ESTP</option>
      <option value="ESFP">ESFP</option>
      <option value="ENFP">ENFP</option>
      <option value="ENTP">ENTP</option>
      <option value="ESTJ">ESTJ</option>
      <option value="ESFJ">ESFJ</option>
      <option value="ENFJ">ENFJ</option>
      <option value="ENTJ">ENTJ</option>
    </select>
  </div>
  
  <button onclick="generateAdvice()">ë¶„ì„í•˜ê¸°</button>
  <div class="result" id="result"></div>

  <script>
    // MBTI ì°¨ì›ë³„ í–‰ë™/ì„ í˜¸ ì˜ˆì‹œ
    const prefer = {
      E: ["í•¨ê»˜ ì–´ìš¸ë¦¬ëŠ” í™œë™", "ì¦‰ê°ì ì¸ ë°˜ì‘", "í™œë°œí•œ ëŒ€í™”"],
      I: ["ì¡°ìš©í•œ ë¶„ìœ„ê¸°", "í˜¼ìë§Œì˜ ì‹œê°„", "ê¹Šì€ ëŒ€í™”"],
      S: ["êµ¬ì²´ì ì¸ ì¹­ì°¬", "ì‹¤ìƒí™œ ì´ì•¼ê¸°", "ì•½ì† ì˜ ì§€í‚¤ê¸°"],
      N: ["ë¯¸ë˜ ì´ì•¼ê¸°", "ì•„ì´ë””ì–´ ë‚˜ëˆ„ê¸°", "ìƒìƒë ¥ ìê·¹ ëŒ€í™”"],
      T: ["ë…¼ë¦¬ì  ì„¤ëª…", "ì†”ì§í•œ í”¼ë“œë°±", "ë¬¸ì œ í•´ê²° ì œì•ˆ"],
      F: ["ê³µê°í•´ì£¼ê¸°", "ê°ì • í‘œí˜„", "ë”°ëœ»í•œ ë§ í•œë§ˆë””"],
      J: ["ê³„íš ì„¸ìš°ê¸°", "ì •í•´ì§„ ì•½ì† ì§€í‚¤ê¸°", "ì‹œê°„ ì•½ì†"],
      P: ["ì¦‰í¥ ì œì•ˆ", "ìœ ì—°í•œ íƒœë„", "ìƒˆë¡œìš´ ê²½í—˜"]
    };

    // ì°¨ì›ë³„ ì‹«ì–´í•˜ëŠ” ê²ƒ ì˜ˆì‹œ
    const dislike = {
      E: ["í˜¼ìë§Œì˜ ì‹œê°„ ë°©í•´", "ë¬´ê´€ì‹¬í•œ íƒœë„", "ë‹µì¥ ëŠ¦ê²Œ í•˜ê¸°"],
      I: ["ì§€ë‚˜ì¹œ ê´€ì‹¬ í‘œí˜„", "ê³„ì†ëœ ì—°ë½", "ì‚¬ìƒí™œ ì¹¨í•´"],
      S: ["ë§‰ì—°í•œ ì´ì•¼ê¸°", "ê³„íš ì—†ëŠ” í–‰ë™", "ì•½ì† ì–´ê¸°ê¸°"],
      N: ["ì§€ë‚˜ì¹˜ê²Œ í˜„ì‹¤ì ì¸ ì´ì•¼ê¸°", "ìƒìƒë ¥ ë¬´ì‹œ", "ìƒˆë¡œìš´ ì‹œë„ ê±°ë¶€"],
      T: ["ê°ì •ì ìœ¼ë¡œ ë”°ì§€ê¸°", "ë¹„ë…¼ë¦¬ì  ì£¼ì¥", "ëŒë ¤ ë§í•˜ê¸°"],
      F: ["ë¬´ëšëší•œ ë§íˆ¬", "ê³µê° ì—†ëŠ” ë°˜ì‘", "ë¹„íŒì ì¸ íƒœë„"],
      J: ["ê³„íš ì—†ëŠ” í–‰ë™", "ì¦‰í¥ ì•½ì†", "ì¼ì • ìì£¼ ë³€ê²½"],
      P: ["ì§€ë‚˜ì¹˜ê²Œ í†µì œí•˜ê¸°", "ê³„íš ê°•ìš”", "ì¦‰í¥ì„± ë¬´ì‹œ"]
    };

    // MBTI 4ê¸€ìë³„ ì°¨ì› ë°°ì—´
    const mbtiDims = ["E/I", "S/N", "T/F", "J/P"];

    function getSimilarity(my, other) {
      let same = 0;
      for (let i = 0; i < 4; i++) {
        if (my[i] === other[i]) same++;
      }
      return Math.round((same / 4) * 100);
    }

    function getBothLike(my, other) {
      // ë‘˜ ë‹¤ ê°™ì€ ì°¨ì›ì¼ ë•Œì˜ ì„ í˜¸ í–‰ë™
      let both = [];
      for (let i = 0; i < 4; i++) {
        if (my[i] === other[i]) {
          both = both.concat(prefer[my[i]]);
        }
      }
      // ì¤‘ë³µ ì œê±°
      return [...new Set(both)];
    }

    function getMyWantOtherDislike(my, other) {
      // ë‚´ê°€ ì¢‹ì•„í•˜ëŠ”ë°, ìƒëŒ€ëŠ” ì‹«ì–´í•˜ëŠ” ê²ƒ
      let result = [];
      for (let i = 0; i < 4; i++) {
        prefer[my[i]].forEach(item => {
          if (dislike[other[i]].includes(item)) {
            result.push(item);
          }
        });
      }
      return [...new Set(result)];
    }

    function getOtherWantMyDislike(my, other) {
      // ìƒëŒ€ê°€ ì¢‹ì•„í•˜ëŠ”ë°, ë‚˜ëŠ” ì‹«ì–´í•˜ëŠ” ê²ƒ
      let result = [];
      for (let i = 0; i < 4; i++) {
        prefer[other[i]].forEach(item => {
          if (dislike[my[i]].includes(item)) {
            result.push(item);
          }
        });
      }
      return [...new Set(result)];
    }

    function generateAdvice() {
      const my = document.getElementById('myMbti').value;
      const other = document.getElementById('otherMbti').value;
      const resultDiv = document.getElementById('result');

      if (!my || !other) {
        resultDiv.innerHTML = '<h3>âš ï¸ ë‘ MBTIë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”!</h3>';
        return;
      }

      // 1. ìœ ì‚¬ë„ ê³„ì‚°
      const similarity = getSimilarity(my, other);

      // 2. ë‚´ê°€ í•˜ê³ ì‹¶ì§€ë§Œ ìƒëŒ€ê°€ ì‹«ì–´í•˜ëŠ” ê²ƒ
      const myWantOtherDislike = getMyWantOtherDislike(my, other);

      // 3. ìƒëŒ€ê°€ ì¢‹ì•„í•˜ì§€ë§Œ ë‚˜ëŠ” ë‚´ì¼œí•˜ì§€ ì•ŠëŠ” ê²ƒ
      const otherWantMyDislike = getOtherWantMyDislike(my, other);

      // 4. ë‘˜ ë‹¤ ì¢‹ì•„í•  ê°€ëŠ¥ì„±ì´ í° ê²ƒ
      const bothLike = getBothLike(my, other);

      // 5. ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
      let html = `<h2>${my} â¤ï¸ ${other} ê¶í•© ë¶„ì„</h2>`;
      html += `
        <h3>ì„±í–¥ ìœ ì‚¬ë„</h3>
        <div class="bar-wrap">
          <div class="bar-container">
            <div class="bar" style="width:${similarity}%;"></div>
          </div>
          <span class="score-label">${similarity}ì  / 100ì </span>
        </div>
      `;

      html += '<h3>ğŸ˜… ë‚´ê°€ í•˜ê³ ì‹¶ì–´ í•˜ì§€ë§Œ ìƒëŒ€ë°©ì´ ì‹«ì–´í•  ìˆ˜ ìˆëŠ” ê²ƒ</h3>';
      if (myWantOtherDislike.length > 0) {
        html += '<ul>';
        myWantOtherDislike.forEach(item => html += `<li>${item}</li>`);
        html += '</ul>';
      } else {
        html += '<p>íŠ¹ë³„íˆ í•´ë‹¹ë˜ëŠ” í–‰ë™ì´ ì—†ì–´ìš”!</p>';
      }

      html += '<h3>ğŸ¤” ìƒëŒ€ë°©ì´ ì¢‹ì•„í•˜ì§€ë§Œ ë‚˜ëŠ” ë‚´ì¼œí•˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ” ê²ƒ</h3>';
      if (otherWantMyDislike.length > 0) {
        html += '<ul>';
        otherWantMyDislike.forEach(item => html += `<li>${item}</li>`);
        html += '</ul>';
      } else {
        html += '<p>íŠ¹ë³„íˆ í•´ë‹¹ë˜ëŠ” í–‰ë™ì´ ì—†ì–´ìš”!</p>';
      }

      html += '<h3>ğŸ˜Š ë‘˜ ë‹¤ ì¢‹ì•„í•  ê°€ëŠ¥ì„±ì´ í° ê²ƒ</h3>';
      if (bothLike.length > 0) {
        html += '<ul>';
        bothLike.forEach(item => html += `<li>${item}</li>`);
        html += '</ul>';
      } else {
        html += '<p>ê³µí†µìœ¼ë¡œ ì¢‹ì•„í•  ë§Œí•œ í–‰ë™ì´ ì ì–´ìš”. ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¡´ì¤‘í•´ë³´ì„¸ìš”!</p>';
      }

      resultDiv.innerHTML = html;
    }
  </script>
</body>
</html>

